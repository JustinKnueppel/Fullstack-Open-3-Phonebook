(this.webpackJsonpphone_book=this.webpackJsonpphone_book||[]).push([[0],{19:function(e,t,n){e.exports=n(43)},42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(17),c=n.n(o),u=n(18),s=n(3),l=n(2),i=n.n(l),m=n(6),p=n(4),f=n.n(p);f.a.defaults.baseURL="/api";var d={getAll:function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("/persons");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addPerson:function(){var e=Object(m.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("/persons",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deletePerson:function(){var e=Object(m.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.delete("/persons/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),replacePerson:function(){var e=Object(m.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.put("/persons/".concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},b=function(e){var t=e.person;return a.a.createElement("span",null,t.name,": ",t.number)},v=function(e){var t=e.persons,n=e.deletePerson;return a.a.createElement("ul",null,t.map((function(e){return a.a.createElement("li",{key:e.id},a.a.createElement(b,{person:e}),a.a.createElement("button",{onClick:n(e)},"Delete"))})))},h=function(e){return a.a.createElement("form",{className:"phonebook-form"},a.a.createElement("div",null,"name: ",a.a.createElement("input",{value:e.newName,onChange:e.setNameField}),a.a.createElement("br",null),"number: ",a.a.createElement("input",{value:e.newNumber,onChange:e.setNumberField})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit",onClick:e.addPerson},"add")))},E=function(e){return a.a.createElement(a.a.Fragment,null,"Filter shown with"," ",a.a.createElement("input",{value:e.nameFilter,onChange:e.setNameFilterField}))},w=function(e){var t=e.text,n=e.type;return null===t||null===n?null:a.a.createElement("div",{className:n},t)},O=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(""),l=Object(s.a)(c,2),i=l[0],m=l[1],p=Object(r.useState)(""),f=Object(s.a)(p,2),b=f[0],O=f[1],j=Object(r.useState)(""),g=Object(s.a)(j,2),k=g[0],N=g[1],F=Object(r.useState)(""),x=Object(s.a)(F,2),P=x[0],y=x[1],C=Object(r.useState)(""),S=Object(s.a)(C,2),T=S[0],A=S[1];Object(r.useEffect)((function(){d.getAll().then((function(e){o(e)}))}),[]);var D=n.filter((function(e){return e.name.toLowerCase().includes(k.toLowerCase())})),L=function(){y(""),A("")};return a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(w,{text:P,type:T}),a.a.createElement(E,{nameFilter:k,setNameFilterField:function(e){N(e.target.value)}}),a.a.createElement("h2",null,"Add new"),a.a.createElement(h,{newName:i,setNameField:function(e){m(e.target.value)},newNumber:b,setNumberField:function(e){O(e.target.value)},addPerson:function(e){e.preventDefault();var t={name:i,number:b};if(function(e,t){return e.map((function(e){return e.name})).includes(t)}(n,i)){if(console.log("duplicate person",i),window.confirm("Override phone number of ".concat(i,"?"))){var r=n.find((function(e){return e.name===i})).id;d.replacePerson(r,t).then((function(e){A("success"),y("Changed ".concat(e.name,"'s number to ").concat(e.number)),o(n.map((function(t){return t.id===r?e:t}))),setTimeout(L,5e3)})).catch((function(e){console.log(e.response.data);var t=e.response.data.error;A("error"),y(t)}))}}else d.addPerson(t).then((function(e){A("success"),y("Added ".concat(t.name," to phonebook")),o([].concat(Object(u.a)(n),[e])),m(""),O(""),document.querySelector("form.phonebook-form input").focus(),setTimeout(L,5e3)})).catch((function(e){console.log(e.response.data);var t=e.response.data.error;A("error"),y(t),setTimeout(L,5e3)}))}}),a.a.createElement("h2",null,"Numbers"),a.a.createElement(v,{persons:D,deletePerson:function(e){var t=e.name,r=e.id;return function(){window.confirm("Delete ".concat(t,"?"))&&d.deletePerson(r).then((function(e){console.log(e),A("success"),y("Deleted ".concat(t," from phonebook")),o(n.filter((function(e){return e.id!==r}))),setTimeout(L,5e3)})).catch((function(e){console.log(e.response.data);var t=e.response.data.error;A("error"),y(t),setTimeout(L,5e3)}))}}}))};n(42);c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(O,null)),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.6586a7ec.chunk.js.map