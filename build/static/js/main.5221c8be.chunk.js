(this.webpackJsonpphone_book=this.webpackJsonpphone_book||[]).push([[0],{20:function(e,t,n){e.exports=n(44)},43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(18),u=n.n(c),o=n(8),s=n(19),l=n(3),i=n(2),m=n.n(i),f=n(6),d=n(4),p=n.n(d);p.a.defaults.baseURL="/api";var b={getAll:function(){var e=Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/persons");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addPerson:function(){var e=Object(f.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/persons",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deletePerson:function(){var e=Object(f.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.delete("/persons/".concat(t));case 3:return n=e.sent,e.abrupt("return",200===n.status);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),replacePerson:function(){var e=Object(f.a)(m.a.mark((function e(t,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.put("/persons/".concat(t),n);case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()},v=function(e){var t=e.person;return a.a.createElement("span",null,t.name,": ",t.number)},h=function(e){var t=e.persons,n=e.deletePerson;return a.a.createElement("ul",null,t.map((function(e){return a.a.createElement("li",{key:e.id},a.a.createElement(v,{person:e}),a.a.createElement("button",{onClick:n(e)},"Delete"))})))},E=function(e){return a.a.createElement("form",{className:"phonebook-form"},a.a.createElement("div",null,"name: ",a.a.createElement("input",{value:e.newName,onChange:e.setNameField}),a.a.createElement("br",null),"number: ",a.a.createElement("input",{value:e.newNumber,onChange:e.setNumberField})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit",onClick:e.addPerson},"add")))},w=function(e){return a.a.createElement(a.a.Fragment,null,"Filter shown with"," ",a.a.createElement("input",{value:e.nameFilter,onChange:e.setNameFilterField}))},O=function(e){var t=e.text,n=e.type;return null===t||null===n?null:a.a.createElement("div",{className:n},t)},j=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],u=Object(r.useState)(""),i=Object(l.a)(u,2),m=i[0],f=i[1],d=Object(r.useState)(""),p=Object(l.a)(d,2),v=p[0],j=p[1],k=Object(r.useState)(""),g=Object(l.a)(k,2),y=g[0],F=g[1],N=Object(r.useState)(""),x=Object(l.a)(N,2),P=x[0],C=x[1],S=Object(r.useState)(""),T=Object(l.a)(S,2),A=T[0],D=T[1];Object(r.useEffect)((function(){b.getAll().then((function(e){c(e)}))}),[]);var L=n.filter((function(e){return e.name.toLowerCase().includes(y.toLowerCase())})),J=function(){C(""),D("")};return a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(O,{text:P,type:A}),a.a.createElement(w,{nameFilter:y,setNameFilterField:function(e){F(e.target.value)}}),a.a.createElement("h2",null,"Add new"),a.a.createElement(E,{newName:m,setNameField:function(e){f(e.target.value)},newNumber:v,setNumberField:function(e){j(e.target.value)},addPerson:function(e){e.preventDefault();var t={name:m,number:v};if(function(e,t){return e.map((function(e){return e.name})).includes(t)}(n,m)){if(window.confirm("Override phone number of ".concat(m,"?"))){var r=n.find((function(e){return e.name===m})).id;b.replacePerson(r,t).then((function(e){if(0===Object.keys(e).length)return D("error"),C("".concat(t.name," not successfully modified")),void setTimeout(J,5e3);D("success"),C("Changed ".concat(e.name,"'s number to ").concat(e.number)),c(n.map((function(t){return t.id===r?e:t}))),setTimeout(J,5e3)}))}}else b.addPerson(t).then((function(e){var r=e.id;if(!r)return D("error"),C("".concat(t.name," not successfully added")),void setTimeout(J,5e3);D("success"),C("Added ".concat(t.name," to phonebook")),c([].concat(Object(s.a)(n),[Object(o.a)(Object(o.a)({},t),{},{id:r})])),f(""),j(""),document.querySelector("form.phonebook-form input").focus(),setTimeout(J,5e3)})).catch((function(e){console.log(e),D("error"),C("".concat(t.name," not successfully added")),setTimeout(J,5e3)}))}}),a.a.createElement("h2",null,"Numbers"),a.a.createElement(h,{persons:L,deletePerson:function(e){var t=e.name,r=e.id;return function(){window.confirm("Delete ".concat(t,"?"))&&b.deletePerson(r).then((function(e){if(!e)return D("error"),C("Failed to delete ".concat(t," from phonebook")),void setTimeout(J,5e3);D("success"),C("Deleted ".concat(t," from phonebook")),c(n.filter((function(e){return e.id!==r}))),setTimeout(J,5e3)}))}}}))};n(43);u.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(j,null)),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.5221c8be.chunk.js.map